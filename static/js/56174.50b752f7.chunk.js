"use strict";(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[56174],{56027:(e,r,t)=>{t.d(r,{Z:()=>d});var s=t(72791),a=t(96052),o=t(34658),n=t(95385),i=t(75358),l=t(80184);const c=e=>{let{title:r,Footer:t,showBtn:s,subTitle:c,children:d,labelBtn:u,delegations:{loading:h,handleSubmit:m}}=e;return(0,l.jsxs)("div",{id:"AuthForm",children:[(0,l.jsx)(o.Z,{image:n,className:"mb-1"}),(0,l.jsxs)(a.Zb,{className:"card-style",children:[(0,l.jsxs)(a.eW,{className:"card-body-style",children:[(0,l.jsx)("h1",{className:"title",children:r}),(0,l.jsx)("p",{className:"sub-tilte mb-2",children:c}),(0,l.jsxs)(a.l0,{className:"form",onSubmit:m,children:[d,(0,l.jsx)(i.Z,{label:u,show:s,loading:h,handleOnclick:m})]})]}),t?(0,l.jsx)("div",{className:"footer-wrapper",children:(0,l.jsx)(t,{})}):(0,l.jsx)("div",{className:"mb-1"})]})]})},d=e=>{const{handleSumbitForm:r=(()=>{}),...t}=e,[a,o]=(0,s.useState)(!1),n=()=>o(!0),i=()=>o(!1);return(0,l.jsx)(c,{...t,delegations:{loading:a,handleSubmit:e=>{e.preventDefault(),r({handleStartLoading:n,handleFinishLoading:i})}}})}},56174:(e,r,t)=>{t.r(r),t.d(r,{default:()=>w});var s=t(60364),a=t(67571),o=t(61134),n=t(25969),i=t(79684),l=t(631),c=t(4415),d=t(19741),u=t(76973),h=t(56027),m=t(3556),p=t(80184);const b=()=>(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("p",{children:"Voler a "}),(0,p.jsx)(d.rU,{to:"/auth/login",children:"Inicio Sesi\xf3n."})]}),f=e=>{let{delegations:{hookForm:r,handleRecoverSubmit:t}}=e;return(0,p.jsx)("div",{id:"RecoverPasswordPage",children:(0,p.jsx)(h.Z,{Footer:b,labelBtn:"Enviar Correo",title:"Restablecer Contrase\xf1a",handleSumbitForm:t,subTitle:"Ingresa tu nombre de usuario. Haremos llegar un correo con las instrucciones para restablecer tu contrase\xf1a.",children:(0,p.jsx)(m.Z,{name:"user",label:"Nombre de Usuario",icon:(0,p.jsx)(u.Z,{size:16}),register:r.register,errors:r.formState.errors,placeholder:"Ingresa el nombre de usuario"})})})},v=(0,i.Ev)({AuthService:c.Z}),w=(0,s.$j)(null,v)((e=>{let{authService:r}=e;const t=(0,a.k6)(),{handleSubmit:s,...i}=(0,o.cI)({defaultValues:{user:""}});return(0,p.jsx)(f,{delegations:{hookForm:i,handleRecoverSubmit:e=>s((async s=>{const{handleStartLoading:a=(()=>{}),handleFinishLoading:o=(()=>{})}=e;"function"===typeof a&&a();const i=await r.recoverPassword({username:s.user,password:s.password}).unwrap();"function"===typeof a&&o(),200!==i?404===i?l.Z.info({icon:n.Z,title:"El usuario no existe",body:"Favor de verificar que el usuario sea correcto."}):l.Z.info({icon:n.Z,title:"Error",body:"No se ha podido completar la operaci\xf3n, revisa tu conexi\xf3n a internet."}):t.push("/auth/email_send")}))()}})}))},4415:(e,r,t)=>{t.d(r,{Z:()=>o});var s=t(79684),a=t(28938);const o=(0,s.x1)({login:async(e,r)=>{let{username:t,password:o}=e,{dispatch:n}=r;try{const e=new FormData;e.append("username",t),e.append("password",o);const r=await(0,s.zk)("/auth/login",{method:"POST",body:e});if(200!==r.status)return r.status;const{user:i,token:l}=await r.json();return n(a.Z.actions.setUserData({user:i,token:l})),r.status}catch(i){return console.error("[AuthService.login] ",i),500}},recoverPassword:async(e,r)=>{let{username:t}=e,{dispatch:o}=r;try{const e=new FormData;e.append("username",t);const r=await(0,s.zk)("/auth/recover-password",{method:"POST",body:e});if(r.ok){const{data:e}=await r.json();return o(a.Z.actions.setEmail(e)),r.status}return r.status}catch(n){console.error("[AuthService.forgotPassword] ",n)}},resetPassword:async(e,r)=>{let{password:t,token:o}=e,{dispatch:n}=r;try{const e=new FormData;e.append("password",t);const r=await(0,s.zk)("/auth/reset-password",{body:e,token:o,method:"POST"});return 200!==r.status||n(a.Z.actions.clearUserData()),r.status}catch(i){console.error("[AuthService.resetPassword] ",i)}}})},76973:(e,r,t)=>{t.d(r,{Z:()=>c});var s=t(72791),a=t(52007),o=t.n(a);function n(){return n=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},n.apply(this,arguments)}function i(e,r){if(null==e)return{};var t,s,a=function(e,r){if(null==e)return{};var t,s,a={},o=Object.keys(e);for(s=0;s<o.length;s++)t=o[s],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(s=0;s<o.length;s++)t=o[s],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=(0,s.forwardRef)((function(e,r){var t=e.color,a=void 0===t?"currentColor":t,o=e.size,l=void 0===o?24:o,c=i(e,["color","size"]);return s.createElement("svg",n({ref:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),s.createElement("circle",{cx:"12",cy:"7",r:"4"}))}));l.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},l.displayName="User";const c=l}}]);
//# sourceMappingURL=56174.50b752f7.chunk.js.map