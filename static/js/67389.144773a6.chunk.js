"use strict";(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[67389],{56027:(e,s,a)=>{a.d(s,{Z:()=>l});var t=a(72791),r=a(96052),o=a(34658),n=a(95385),i=a(75358),d=a(80184);const c=e=>{let{title:s,Footer:a,showBtn:t,subTitle:c,children:l,labelBtn:u,delegations:{loading:m,handleSubmit:h}}=e;return(0,d.jsxs)("div",{id:"AuthForm",children:[(0,d.jsx)(o.Z,{image:n,className:"mb-1"}),(0,d.jsxs)(r.Zb,{className:"card-style",children:[(0,d.jsxs)(r.eW,{className:"card-body-style",children:[(0,d.jsx)("h1",{className:"title",children:s}),(0,d.jsx)("p",{className:"sub-tilte mb-2",children:c}),(0,d.jsxs)(r.l0,{className:"form",onSubmit:h,children:[l,(0,d.jsx)(i.Z,{label:u,show:t,loading:m,handleOnclick:h})]})]}),a?(0,d.jsx)("div",{className:"footer-wrapper",children:(0,d.jsx)(a,{})}):(0,d.jsx)("div",{className:"mb-1"})]})]})},l=e=>{const{handleSumbitForm:s=(()=>{}),...a}=e,[r,o]=(0,t.useState)(!1),n=()=>o(!0),i=()=>o(!1);return(0,d.jsx)(c,{...a,delegations:{loading:r,handleSubmit:e=>{e.preventDefault(),s({handleStartLoading:n,handleFinishLoading:i})}}})}},67389:(e,s,a)=>{a.r(s),a.d(s,{default:()=>g});var t=a(60364),r=a(25969),o=a(61134),n=a(67571),i=a(79684),d=a(631),c=a(4415),l=a(62701),u=a(56027),m=a(3556),h=a(80184);const p=e=>{let{delegations:{hookForm:s,handleRestorePassword:a}}=e;return(0,h.jsx)("div",{className:"RestorePassword",children:(0,h.jsxs)(u.Z,{title:"Restablecer Contrase\xf1a",subTitle:"Ingresa una nueva contrase\xf1a.",labelBtn:"Restablecer Contrase\xf1a",handleSumbitForm:a,children:[(0,h.jsx)(m.Z,{type:"password",name:"password",label:"Nueva Contrase\xf1a",icon:(0,h.jsx)(l.ro,{size:16}),register:s.register,errors:s.formState.errors,options:{required:{value:!0,message:"Este campo no puede estar vac\xedo."},minLength:{value:8,message:"Este compo debe tener m\xednimo 8 car\xe1cteres."}}}),(0,h.jsx)(m.Z,{type:"password",name:"password2",label:"Confirmar Contrase\xf1a",icon:(0,h.jsx)(l.ro,{size:16}),register:s.register,errors:s.formState.errors,options:{required:{value:!0,message:"Este campo no puede estar vac\xedo."},minLength:{value:8,message:"Este compo debe tener m\xednimo 8 car\xe1cteres."}}})]})})},w=(0,i.Ev)({AuthService:c.Z}),g=(0,t.$j)(null,w)((e=>{let{authService:s}=e;const{search:a}=(0,n.TH)(),t=(0,n.k6)(),{handleSubmit:c,...l}=(0,o.cI)({defaultValues:{password:"",password2:""}});return(0,h.jsx)(p,{delegations:{hookForm:l,handleRestorePassword:e=>c((async o=>{if(o.password!==o.password2)return l.setError("password",{type:"manual",message:"Las constrase\xf1as no coinciden."}),void l.setError("password2",{type:"manual",message:"Las constrase\xf1as no coinciden."});const{handleStartLoading:n=(()=>{}),handleFinishLoading:c=(()=>{})}=e;"function"===typeof n&&n();const u=new URLSearchParams(a).get("token"),m=i.DS.decode(u),h=await s.resetPassword({token:m,password:o.password}).unwrap();"function"===typeof n&&c(),200!==h?d.Z.info({icon:r.Z,title:"Error",body:"No se ha podido completar la operaci\xf3n con exito, revisa tu conexi\xf3n a internet."}):t.push("/auth/restore_completed")}))()}})}))},4415:(e,s,a)=>{a.d(s,{Z:()=>o});var t=a(79684),r=a(28938);const o=(0,t.x1)({login:async(e,s)=>{let{username:a,password:o}=e,{dispatch:n}=s;try{const e=new FormData;e.append("username",a),e.append("password",o);const s=await(0,t.zk)("/auth/login",{method:"POST",body:e});if(200!==s.status)return s.status;const{user:i,token:d}=await s.json();return n(r.Z.actions.setUserData({user:i,token:d})),s.status}catch(i){return console.error("[AuthService.login] ",i),500}},recoverPassword:async(e,s)=>{let{username:a}=e,{dispatch:o}=s;try{const e=new FormData;e.append("username",a);const s=await(0,t.zk)("/auth/recover-password",{method:"POST",body:e});if(s.ok){const{data:e}=await s.json();return o(r.Z.actions.setEmail(e)),s.status}return s.status}catch(n){console.error("[AuthService.forgotPassword] ",n)}},resetPassword:async(e,s)=>{let{password:a,token:o}=e,{dispatch:n}=s;try{const e=new FormData;e.append("password",a);const s=await(0,t.zk)("/auth/reset-password",{body:e,token:o,method:"POST"});return 200!==s.status||n(r.Z.actions.clearUserData()),s.status}catch(i){console.error("[AuthService.resetPassword] ",i)}}})}}]);
//# sourceMappingURL=67389.144773a6.chunk.js.map