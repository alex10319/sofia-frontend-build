"use strict";(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[35698],{56027:(e,r,t)=>{t.d(r,{Z:()=>d});var s=t(72791),a=t(96052),n=t(34658),o=t(95385),i=t(75358),l=t(80184);const c=e=>{let{title:r,Footer:t,showBtn:s,subTitle:c,children:d,labelBtn:u,delegations:{loading:h,handleSubmit:p}}=e;return(0,l.jsxs)("div",{id:"AuthForm",children:[(0,l.jsx)(n.Z,{image:o,className:"mb-1"}),(0,l.jsxs)(a.Zb,{className:"card-style",children:[(0,l.jsxs)(a.eW,{className:"card-body-style",children:[(0,l.jsx)("h1",{className:"title",children:r}),(0,l.jsx)("p",{className:"sub-tilte mb-2",children:c}),(0,l.jsxs)(a.l0,{className:"form",onSubmit:p,children:[d,(0,l.jsx)(i.Z,{label:u,show:s,loading:h,handleOnclick:p})]})]}),t?(0,l.jsx)("div",{className:"footer-wrapper",children:(0,l.jsx)(t,{})}):(0,l.jsx)("div",{className:"mb-1"})]})]})},d=e=>{const{handleSumbitForm:r=(()=>{}),...t}=e,[a,n]=(0,s.useState)(!1),o=()=>n(!0),i=()=>n(!1);return(0,l.jsx)(c,{...t,delegations:{loading:a,handleSubmit:e=>{e.preventDefault(),r({handleStartLoading:o,handleFinishLoading:i})}}})}},35698:(e,r,t)=>{t.r(r),t.d(r,{default:()=>f});var s=t(60364),a=t(25969),n=t(61134),o=t(79684),i=t(631),l=t(4415),c=t(19741),d=t(76973),u=t(62701),h=t(3556),p=t(56027),m=t(80184);const g=()=>(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)("p",{children:"\xbfOlvidaste tu contrase\xf1a?"}),(0,m.jsx)(c.rU,{to:"/auth/recover_password",children:"Restabl\xe9cela Aqu\xed."})]}),w=e=>{let{delegations:{hookForm:r,handleLoginSubmit:t}}=e;return(0,m.jsx)("div",{id:"LoginPage",children:(0,m.jsxs)(p.Z,{Footer:g,labelBtn:"Iniciar Sesi\xf3n",title:"\xa1Bienvenido de Nuevo!",handleSumbitForm:t,subTitle:"Ingresa tu usuario y contrase\xf1a para acceder al portal.",children:[(0,m.jsx)(h.Z,{name:"user",label:"Nombre de Usuario",icon:(0,m.jsx)(d.Z,{size:16}),register:r.register,errors:r.formState.errors,placeholder:"Ingresa el nombre de usuario"}),(0,m.jsx)(h.Z,{type:"password",name:"password",label:"Contrase\xf1a",icon:(0,m.jsx)(u.ro,{size:16}),register:r.register,errors:r.formState.errors})]})})},b=(0,o.Ev)({AuthService:l.Z}),f=(0,s.$j)(null,b)((e=>{let{authService:r}=e;const{handleSubmit:t,...s}=(0,n.cI)({defaultValues:{user:"",password:""}});return(0,m.jsx)(w,{delegations:{hookForm:s,handleLoginSubmit:e=>t((async t=>{const{handleStartLoading:n=(()=>{}),handleFinishLoading:o=(()=>{})}=e;"function"===typeof n&&n();const l=await r.login({username:t.user,password:t.password}).unwrap();"function"===typeof n&&o(),200!==l&&(404===l||400===l?(s.setError("user",{type:"manual",message:"Credenciales erroneas."}),s.setError("password",{type:"manual",message:"Credenciales erroneas."})):409===l?i.Z.info({icon:a.Z,title:"Cuenta Inactiva",body:"Tu ha sido desactivada, contacta a tu administrador."}):i.Z.error({icon:a.Z,title:"Error",body:"No se ha podido iniciar sesi\xf3n, revisa tu conexi\xf3n a internet."}))}))()}})}))},4415:(e,r,t)=>{t.d(r,{Z:()=>n});var s=t(79684),a=t(28938);const n=(0,s.x1)({login:async(e,r)=>{let{username:t,password:n}=e,{dispatch:o}=r;try{const e=new FormData;e.append("username",t),e.append("password",n);const r=await(0,s.zk)("/auth/login",{method:"POST",body:e});if(200!==r.status)return r.status;const{user:i,token:l}=await r.json();return o(a.Z.actions.setUserData({user:i,token:l})),r.status}catch(i){return console.error("[AuthService.login] ",i),500}},recoverPassword:async(e,r)=>{let{username:t}=e,{dispatch:n}=r;try{const e=new FormData;e.append("username",t);const r=await(0,s.zk)("/auth/recover-password",{method:"POST",body:e});if(r.ok){const{data:e}=await r.json();return n(a.Z.actions.setEmail(e)),r.status}return r.status}catch(o){console.error("[AuthService.forgotPassword] ",o)}},resetPassword:async(e,r)=>{let{password:t,token:n}=e,{dispatch:o}=r;try{const e=new FormData;e.append("password",t);const r=await(0,s.zk)("/auth/reset-password",{body:e,token:n,method:"POST"});return 200!==r.status||o(a.Z.actions.clearUserData()),r.status}catch(i){console.error("[AuthService.resetPassword] ",i)}}})},76973:(e,r,t)=>{t.d(r,{Z:()=>c});var s=t(72791),a=t(52007),n=t.n(a);function o(){return o=Object.assign||function(e){for(var r=1;r<arguments.length;r++){var t=arguments[r];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},o.apply(this,arguments)}function i(e,r){if(null==e)return{};var t,s,a=function(e,r){if(null==e)return{};var t,s,a={},n=Object.keys(e);for(s=0;s<n.length;s++)t=n[s],r.indexOf(t)>=0||(a[t]=e[t]);return a}(e,r);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);for(s=0;s<n.length;s++)t=n[s],r.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var l=(0,s.forwardRef)((function(e,r){var t=e.color,a=void 0===t?"currentColor":t,n=e.size,l=void 0===n?24:n,c=i(e,["color","size"]);return s.createElement("svg",o({ref:r,xmlns:"http://www.w3.org/2000/svg",width:l,height:l,viewBox:"0 0 24 24",fill:"none",stroke:a,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},c),s.createElement("path",{d:"M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"}),s.createElement("circle",{cx:"12",cy:"7",r:"4"}))}));l.propTypes={color:n().string,size:n().oneOfType([n().string,n().number])},l.displayName="User";const c=l}}]);
//# sourceMappingURL=35698.e21c0f0a.chunk.js.map