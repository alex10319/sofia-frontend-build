(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[30851],{39217:(e,i,a)=>{"use strict";a.r(i),a.d(i,{default:()=>Y});var l=a(72791),s=a(60364),o=a(79684),r=a(29124),t=a(98775),n=a(18622),d=a(62701),c=a(62249),u=a(69085),v=a(67571),m=a(97892),p=a.n(m),h=a(99893),x=a.n(h),g=a(4528),b=a(71651),j=a(61619),f=a(45954),y=a(96052),M=a(91356),N=a(22835),P=a(80184);const C={perit:"Perito",consult:"Consulta",guest:"Invitado",assistant:"Asistente",administrator:"Administrador",administrator_technician:"Administrador T\xe9cnico"},S=(0,o.Ev)({ModalSliceActions:M.ModalSlice.actions,UsersSliceActions:u.Z.actions}),_=(0,s.$j)(null,S)((e=>{var i;let{user:a,modalSliceActions:l,usersSliceActions:s,delegations:{isExpired:o,dropdownOpen:r,toggleDropdown:t,handleShowUserDetail:n}}=e;return(0,P.jsx)("div",{id:"UserCard",children:(0,P.jsx)(y.Zb,{id:"card",children:(0,P.jsxs)(y.eW,{className:"click-card",onClick:()=>n(null===a||void 0===a?void 0:a._id),children:[(0,P.jsxs)("div",{className:"icons-wrapper ",children:[0===o(null===a||void 0===a?void 0:a.countDays)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(g.Z,{id:"almost-expired"+(null===a||void 0===a?void 0:a._id),className:"clock-color",size:15}),(0,P.jsx)(y.vg,{target:"almost-expired"+(null===a||void 0===a?void 0:a._id),children:"La vigencia del registro est\xe1 apunto de expirar"})]}),1===o(null===a||void 0===a?void 0:a.countDays)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(g.Z,{id:"almost-expired"+(null===a||void 0===a?void 0:a._id),className:"alert-color",size:15}),(0,P.jsx)(y.vg,{target:"almost-expired"+(null===a||void 0===a?void 0:a._id),children:"La vigencia del registro ha expirado"})]}),!(null!==a&&void 0!==a&&a.complete_profile)&&(0,P.jsxs)(P.Fragment,{children:[(0,P.jsx)(b.Z,{id:"files"+(null===a||void 0===a?void 0:a._id),className:"alert-trinagle-color",size:14}),(0,P.jsx)(y.vg,{target:"files"+(null===a||void 0===a?void 0:a._id),children:"Falta documentaci\xf3n"})]})]}),(0,P.jsxs)("div",{className:"card-header-style",children:[(0,P.jsx)(N.Z,{image:null===a||void 0===a?void 0:a.image,name:null===a||void 0===a?void 0:a.name,subIcon:!0,subIconColor:null!==a&&void 0!==a&&a.active?"#52658f":"#E5E5E5"}),(0,P.jsxs)("div",{children:[(0,P.jsx)(y.Ct,{className:"badge-style admin",children:null!==(i=null===C||void 0===C?void 0:C[null===a||void 0===a?void 0:a.role])&&void 0!==i?i:null===a||void 0===a?void 0:a.role}),(0,P.jsxs)(y.Kb,{direction:"start",isOpen:r,toggle:t,children:[(0,P.jsx)(y.Z_,{size:"sm",color:"flat-secondary",onClick:t,className:"btn-icon rounded-circle",children:(0,P.jsx)(d.v2,{size:20})}),(0,P.jsxs)(y.h_,{children:[(0,P.jsx)(y.hP,{tag:"a",onClick:()=>s.openCreateUserModal(null===a||void 0===a?void 0:a._id),children:"Editar"}),null!==a&&void 0!==a&&a.active?(0,P.jsx)(y.hP,{tag:"a",onClick:()=>l.openModal({type:"confirmationModal",props:{image:"",_id:null===a||void 0===a?void 0:a._id,name:"Usuario",identifier:null===a||void 0===a?void 0:a.email,actionToDispatch:"disableUser",title:"Deshabilitar Usuario",confirmationQuestion:"\xbfEst\xe1s seguro que quieres deshabilitar este usuario?",bodyText:"Podr\xe1s volver a habilitar al usuario en cualquier momento.",confirmLabel:"S\xed, Deshabilitar"}}),children:"Deshabilitar"}):(0,P.jsx)(y.hP,{tag:"a",onClick:()=>l.openModal({type:"confirmationModal",props:{image:"",_id:null===a||void 0===a?void 0:a._id,name:"Usuario",identifier:null===a||void 0===a?void 0:a.email,actionToDispatch:"enableUser",title:"Habilitar Usuario",confirmationQuestion:"\xbfEst\xe1s seguro que quieres habilitar este usuario?",bodyText:"Podr\xe1s volver a deshabilitar al usuario en cualquier momento.",confirmLabel:"S\xed, Habilitar"}}),children:"Habilitar"}),(0,P.jsx)(y.hP,{tag:"a",onClick:()=>l.openModal({type:"confirmationModal",props:{image:"",_id:null===a||void 0===a?void 0:a._id,identifier:null===a||void 0===a?void 0:a.email,name:"Usuario",actionToDispatch:"deleteUser",title:"Eliminar Usuario",confirmationQuestion:"\xbfEst\xe1s seguro que quieres eliminar este usuario?",bodyText:"Este usuario se eliminar\xe1 permanentemente.",confirmLabel:"S\xed, Eliminar"}}),children:"Eliminar"})]})]})]})]}),(0,P.jsxs)("div",{children:[(0,P.jsxs)("p",{className:"name-text mt-1",children:[null===a||void 0===a?void 0:a.name," ",null===a||void 0===a?void 0:a.lastname]}),(0,P.jsx)("p",{className:"user-name-text",children:null===a||void 0===a?void 0:a.username}),(0,P.jsxs)("div",{className:"content-group mt-2",children:[(0,P.jsxs)("div",{className:"group-icon-text",children:[(0,P.jsx)(j.Z,{className:"icon-color",size:15}),(0,P.jsx)("p",{className:"label",children:"Correo: "})]}),(0,P.jsx)("p",{className:"text",children:null!==a&&void 0!==a&&a.email?a.email:"---"})]}),(0,P.jsxs)("div",{className:"content-group mt-2",children:[(0,P.jsxs)("div",{className:"group-icon-text",children:[(0,P.jsx)(f.Z,{className:"icon-color",size:15}),(0,P.jsx)("p",{className:"label",children:"Tel\xe9fono: "})]}),(0,P.jsx)("p",{className:"text",children:null!==a&&void 0!==a&&a.phone?a.phone:"---"})]})]})]})})})}));p().extend(x());const E=e=>{let{user:i}=e;const a=(0,v.k6)(),[s,o]=(0,l.useState)(!1);return(0,P.jsx)(_,{user:i,delegations:{isExpired:e=>e<=60&&e>=0?0:!e||e<0?1:void 0,dropdownOpen:s,toggleDropdown:e=>{e.stopPropagation(),o(!s)},handleShowUserDetail:e=>a.push("/app/users_details/".concat(e))}})};var U=a(82068),A=a(91203);const D=[{value:!0,label:"Activo"},{value:!1,label:"Inactivo"}],L=[{label:"Administrador",value:"administrator"},{label:"Consulta",value:"consult"},{label:"Invitado",value:"guest"},{label:"Perito",value:"perit"},{label:"Administrador  T\xe9cnico",value:"administrator_technician"}],T=[{value:"name",label:"Nombre"},{value:"lastname",label:"Apellido"},{value:"active",label:"Status"}],w=[{value:"validity",label:"Vigente"},{value:"almost_expired",label:"Por Vencer"},{value:"expired",label:"Vencido"}],O=(0,o.Ev)({UsersSliceActions:u.Z.actions}),Z=(0,s.$j)((e=>{var i,a;let{_usersSlice:l}=e;return{users:null!==(i=null===l||void 0===l?void 0:l.docs)&&void 0!==i?i:[],totalPages:null!==(a=null===l||void 0===l?void 0:l.totalPages)&&void 0!==a?a:1}}),O)((e=>{let{users:i,totalPages:a,usersSliceActions:l,delegations:{handleSearch:s,handleFilters:o,statesOptions:r,handleChangeFilter:t}}=e;return(0,P.jsxs)("div",{id:"UserPage",children:[(0,P.jsx)(A.Z,{rolesOptions:L,statesOptions:r}),(0,P.jsx)(c.Z,{title:"Usuarios",btnLabel:"Agregar Usuario",handleOnclick:()=>l.openCreateUserModal(),handleSearch:s}),(0,P.jsxs)("div",{className:"wrapper-filters",children:[(0,P.jsxs)("div",{className:"filters-container mb-2",children:[(0,P.jsx)(n.ZP,{isMulti:!0,isClearable:!0,options:L,placeholder:"Rol",classNamePrefix:"select",onChange:e=>t("roles",e),menuPortalTarget:document.body}),(0,P.jsx)(n.ZP,{isMulti:!0,isClearable:!0,options:r,placeholder:"Estados",classNamePrefix:"select",onChange:e=>t("states",e),menuPortalTarget:document.body}),(0,P.jsx)(n.ZP,{isClearable:!0,options:D,placeholder:"Status",classNamePrefix:"select",onChange:e=>t("status",e),menuPortalTarget:document.body}),(0,P.jsx)(n.ZP,{isMulti:!0,isClearable:!0,options:w,placeholder:"Vigencia",classNamePrefix:"select",onChange:e=>t("validities",e),menuPortalTarget:document.body})]}),(0,P.jsxs)("div",{className:"wrapper-sort",children:[(0,P.jsxs)("div",{className:"group",children:[(0,P.jsx)(d.IU,{}),(0,P.jsx)("p",{children:"Organizar por:"})]}),(0,P.jsx)("div",{children:(0,P.jsx)(n.ZP,{isClearable:!0,options:T,classNamePrefix:"select",className:"search-select",onChange:e=>t("orderBy",e),menuPortalTarget:document.body})})]})]}),(0,P.jsx)("div",{className:"cards-container mb-1",children:i.map((e=>(0,P.jsx)(E,{user:e},e._id)))}),(0,P.jsx)(U.Z,{module:"users",totalPage:a,actionType:"getAllUsers",handleGetData:o})]})})),k=(0,o.Ev)({GenericSerivices:t.Z}),Y=(0,s.$j)(null,k)((e=>{let{genericSerivices:i}=e;const[a,s]=(0,l.useState)([]),[o,t]=(0,l.useState)({status:{},search:"",orderBy:"",roles:[],states:[],validities:[]}),n=(0,r.Nr)((e=>d("search",e)),700),d=(e,i)=>t((a=>({...a,[e]:i}))),c=e=>{var a,l;const s=o.roles.map((e=>null===e||void 0===e?void 0:e.value)),r=o.states.map((e=>null===e||void 0===e?void 0:e.value)),t=o.validities.map((e=>null===e||void 0===e?void 0:e.value));let n;o.orderBy&&(n=-1),i.getAll({module:"users",actionType:"getAllUsers",query:{page:e,role:s,order:n,state:r,validation:t,search:o.search,orderBy:null===(a=o.orderBy)||void 0===a?void 0:a.value,active:null===(l=o.status)||void 0===l?void 0:l.value}})};return(0,l.useEffect)((()=>{c()}),[o]),(0,l.useEffect)((()=>(i.getAll({module:"places",callback:e=>{let{data:i}=e;const a=i.data.map((e=>({label:e.name,value:e._id})));s(a)}}),()=>{s([])})),[]),(0,P.jsx)(Z,{delegations:{handleSearch:n,handleFilters:c,statesOptions:a,handleChangeFilter:d}})}))},99893:function(e){e.exports=function(){"use strict";var e={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"};return function(i,a,l){var s=a.prototype,o=s.format;l.en.formats=e,s.format=function(i){void 0===i&&(i="YYYY-MM-DDTHH:mm:ssZ");var a=this.$locale().formats,l=function(i,a){return i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(i,l,s){var o=s&&s.toUpperCase();return l||a[s]||e[s]||a[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(e,i,a){return i||a.slice(1)}))}))}(i,void 0===a?{}:a);return o.call(this,l)}}}()},71651:(e,i,a)=>{"use strict";a.d(i,{Z:()=>d});var l=a(72791),s=a(52007),o=a.n(s);function r(){return r=Object.assign||function(e){for(var i=1;i<arguments.length;i++){var a=arguments[i];for(var l in a)Object.prototype.hasOwnProperty.call(a,l)&&(e[l]=a[l])}return e},r.apply(this,arguments)}function t(e,i){if(null==e)return{};var a,l,s=function(e,i){if(null==e)return{};var a,l,s={},o=Object.keys(e);for(l=0;l<o.length;l++)a=o[l],i.indexOf(a)>=0||(s[a]=e[a]);return s}(e,i);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(l=0;l<o.length;l++)a=o[l],i.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(s[a]=e[a])}return s}var n=(0,l.forwardRef)((function(e,i){var a=e.color,s=void 0===a?"currentColor":a,o=e.size,n=void 0===o?24:o,d=t(e,["color","size"]);return l.createElement("svg",r({ref:i,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:s,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),l.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.createElement("polyline",{points:"14 2 14 8 20 8"}),l.createElement("line",{x1:"9",y1:"15",x2:"15",y2:"15"}))}));n.propTypes={color:o().string,size:o().oneOfType([o().string,o().number])},n.displayName="FileMinus";const d=n}}]);
//# sourceMappingURL=30851.98692a02.chunk.js.map