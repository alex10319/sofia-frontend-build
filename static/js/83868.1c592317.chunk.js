"use strict";(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[83868],{83868:(i,l,o)=>{o.r(l),o.d(l,{default:()=>_});var e=o(72791),t=o(61134),n=o(60364),d=o(67571),a=o(79684),r=o(29124),s=o(91356),u=o(94216),v=o(80184);const c=[{title:"Documentaci\xf3n",Tab:u.UL}],p=i=>{let{delegations:{onSubmit:l,hookForm:o,isLoading:e}}=i;const{formState:{isDirty:t}}=o;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.EF,{currentIndex:0,section:"header",isDirty:t,onSubmit:l,isSubmitingData:e}),(0,v.jsx)(u.mQ,{tabs:c,onSubmit:l,hookForm:o,isSubmitingData:e})]})};var f=o(31730);const _=(0,u.rD)((i=>{var l,o,u,c;let{appraise:_=f.e}=i;const{id:m}=(0,d.UO)(),[b,h]=(0,e.useState)(!1),w=(0,n.I0)(),[y,{isLoading:S}]=(0,r.u7)({toastName:"apprasialCRUD"}),{documentation:g}=_,{deed:x,plane:F,property_tax_bill:k,water_bill:D,other_files:U}=g,j=i=>{if(null===i||void 0===i||!i.location)return null;const l={...i};return null===l||void 0===l||delete l.description,l},L={visit_date:(0,a.hK)(null===g||void 0===g?void 0:g.visit_date),deed:{file:j(x),description:null!==(l=null===x||void 0===x?void 0:x.description)&&void 0!==l?l:""},plane:{file:j(F),description:null!==(o=null===F||void 0===F?void 0:F.description)&&void 0!==o?o:""},property_tax_bill:{file:j(k),description:null!==(u=null===k||void 0===k?void 0:k.description)&&void 0!==u?u:""},water_bill:{file:j(D),description:null!==(c=null===D||void 0===D?void 0:D.description)&&void 0!==c?c:""},other_files:U},C=(0,t.cI)({defaultValues:L}),{handleSubmit:I,control:E}=C,{dirtyFields:T}=(0,t.cl)({control:E}),[z,A]=(0,r.AU)({dirtyFields:T,module:"atachment-file"}),K=async i=>{((()=>{var i,l,o,e;return(null===T||void 0===T||null===(i=T.deed)||void 0===i?void 0:i.file)||(null===T||void 0===T?void 0:T.other_files)||(null===T||void 0===T||null===(l=T.plane)||void 0===l?void 0:l.file)||(null===T||void 0===T||null===(o=T.property_tax_bill)||void 0===o?void 0:o.file)||(null===T||void 0===T||null===(e=T.water_bill)||void 0===e?void 0:e.file)})()||(()=>{var i,l,o,e;return(null===T||void 0===T||null===(i=T.deed)||void 0===i?void 0:i.description)||(null===T||void 0===T||null===(l=T.plane)||void 0===l?void 0:l.description)||(null===T||void 0===T||null===(o=T.property_tax_bill)||void 0===o?void 0:o.description)||(null===T||void 0===T||null===(e=T.water_bill)||void 0===e?void 0:e.description)})())&&(await A(),await z(i))},N=I((async i=>{const{visit_date:l,...o}=i;h(!0),await(async i=>{null!==T&&void 0!==T&&T.visit_date&&await y({module:"/appraisals/documentation/".concat(m),method:"PUT",data:{visit_date:i[0]},tags:["appraisals","apprasial_details"]})})(l),await K(o),h(!1)}));return(0,e.useEffect)((()=>()=>{w(s.FilesSlice.actions.clearFiles())}),[]),(0,v.jsx)(p,{delegations:{onSubmit:N,hookForm:C,isLoading:S||b}})}),f.z)}}]);
//# sourceMappingURL=83868.1c592317.chunk.js.map