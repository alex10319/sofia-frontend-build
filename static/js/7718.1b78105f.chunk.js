"use strict";(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[7718],{7718:(e,t,a)=>{a.r(t),a.d(t,{default:()=>R});var n=a(72791),o=a(61134),s=a(67571),i=a(79684),l=a(29124),r=a(27593),c=a(94216),u=a(80184);const d=e=>{let{delegations:{onSubmit:t,hookForm:a,isLoading:n,resultRef:o,unitValueLandRef:s,tableStResPrcRef:i,areasAndAddElmsRef:l,tableHomologationPRef:r,landAndConstructionsRef:d}}=e;const{isDirty:_}=a.formState,f=[{title:"Investigaci\xf3n de terrenos comparables",ref:s},{title:"Procedimiento residual est\xe1tico",ref:i},{title:"Homologaci\xf3n",ref:r},{title:"Precios de construcci\xf3n de tipos similares (con base en manuales de costos), Terreno y Construcci\xf3n",ref:d},{title:"\xc1reas Comunes y Elementos Adicionales",ref:l},{title:"Resultado del Enfoque F\xedsico",ref:o}];return(0,u.jsxs)("div",{id:"physical",className:"section-table",children:[(0,u.jsx)(c.EF,{isDirty:_,currentIndex:[2,0],section:"body",onSubmit:t,isSubmitingData:n}),(0,u.jsxs)(c.hU,{id:"approach-physcial",hookForm:a,sections:f,onSubmit:t,sectionTitle:"Enfoque F\xedsico",children:[(0,u.jsx)(c.iz,{innerRef:s,title:"Investigaci\xf3n de terrenos comparables"}),(0,u.jsx)(c.jq,{}),(0,u.jsx)(c.iz,{innerRef:i,title:"Procedimiento residual est\xe1tico"}),(0,u.jsx)(c.Bp,{}),(0,u.jsx)(c.iz,{innerRef:r,title:"Homologaci\xf3n"}),(0,u.jsx)(c.TL,{}),(0,u.jsx)(c.iz,{innerRef:d,title:"Precios de construcci\xf3n de tipos similares (con base en manuales de costos), Terreno y Construcci\xf3n"}),(0,u.jsx)(c.iH,{}),(0,u.jsx)(c.iz,{innerRef:l,title:"\xc1reas Comunes y Elementos Adicionales"}),(0,u.jsx)(c.yx,{}),(0,u.jsx)(c.iz,{innerRef:o,title:"Resultado del Enfoque F\xedsico"}),(0,u.jsx)(c.AN,{})]})]})},_={physical_approach:{},page_four:{surface:{superficie_total_land:"",superficie_total_land_subject:""}}},f=[{land_fraction:void 0,net_unit_value:"",area_m2:"",zone:"",ubic:"",front:"",shape:"",surface:"",other:"",f_re:"",undivided:"",land_partial_value:""}],p=[...Array(6).keys()].map((e=>({invest_comp:{features:null,ground:"",construction:"",offer_price:"",negotation:"",adjusted_price:"",unit_price:"",clasification:"",value_area:""},source:{name:"",phone:"",date:""},ubication:{street:"",number:"",inner_number:"",colony:null,delegation:"",zipe_code:"",delegation_key:"",colony_ke:""}}))),m=[...Array(6).keys()].map((e=>({b:null,vi:"",pays_m:"",age:"",vut:"",demerit:"",conserv:null,pn:"",pt:"",f:"",unit_value:0}))),v=[...Array(6).keys()].map((e=>({zone:"",ubication:"",front:"",shape:"",surface:"",other:"",f_result:"",unit_val_homologation:""}))),h=[...Array(3).keys()].map((e=>({source:"",unit_price:"",desc:""}))),y=[{type_construction:void 0,level_num:"",class:{surface:0,type:0,structure_walls:0,mezzanine:0,covers:0,finishes_walls:0,floors:0,facade:0,windows:0,bath_kitchen_covers:0,bath_furniture:0,class_type:""},area_m2:"",new_vr:"",age_demerit:"",vut:"",age_factor:"",conservation:void 0,other_av:"",f_re:"",net_vr:"",partial_val:"",additional_info:{type:!1,undivided:"",level_rank:"0",use:null,class:null}}],b=[{key:"",desc:null,unit:"",amount:"",vr:"",age_demerit:"",vut:"",age_factor:"",conservation:null,f_re:"",net_ver:"",undivided:"",partial_value:""}],g=[{key:"",desc:null,unit:"",amount:"",vr:"",age_demerit:"",vut:"",factor_age:"",conservation:null,f_re:"",net_ver:"",partial_value:""}],R=(0,c.rD)((e=>{let{appraise:t=_}=e;const{id:a}=(0,s.UO)(),c=(0,n.useRef)(null),R=(0,n.useRef)(null),j=(0,n.useRef)(null),z=(0,n.useRef)(null),x=(0,n.useRef)(null),k=(0,n.useRef)(null),[A,{isLoading:C}]=(0,l.u7)({toastName:"apprasialCRUD"}),{physical_approach:P,page_four:S}=t,{land:w,elements:E,comun_areas:F,homologation:L,construction:D,unit_value_land:H,construction_price:T,statistics_res_process:q}=P,{superficie_total_land:I,superficie_total_land_subject:U}=S.surface,V={...P,superficie_total_land_subject:U,surface_f:{...P.surface_f,total_land:I,lot:U},land_total_surface:I,unit_value_land:(0,i.z8)(H,p),statistics_res_process:(0,i.z8)(q,m),homologation:(0,i.z8)(L,v),construction_price:(0,i.z8)(T,h),land:(0,i.z8)(w,f),construction:(0,i.z8)(D,y),comun_areas:(0,i.z8)(F,b),elements:(0,i.z8)(E,g)},N=(0,o.cI)({defaultValues:V}),{control:B,handleSubmit:O}=N,G=(0,l.o7)({control:B}),J=e=>(delete e.d_asenta,delete e.d_tipo_asenta,delete e.d_estado,delete e.id_asenta_cpcons,e),K=function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[]).map(((e,t)=>{const a=((e,t)=>{var a,n;const o={...t},{date:s}=o;delete o.date;const i=null===(a=H[e])||void 0===a||null===(n=a.source)||void 0===n?void 0:n.date,l="unit_value_land.".concat(e,".source.date");return{...o,date:G(s,i,l)}})(t,e.source),n=(e=>{const t={...e},{colony:a}=t;return{...t,colony:J({...a})}})(e.ubication);return{...e,source:a,ubication:n}}))},M=e=>{const t=K(e.unit_value_land),{land_partial_total_val:a,construction_total_val:n,total_val_commun_area:o,total_val_element:s}=e,i=(l=[a,n,o,s],(0,r.sV)(l));var l;return{...e,unit_value_land:t,physic_result:i}},Q=O((async e=>{const t=M(e);await A({module:"/appraisals/physical-approach/".concat(a),method:"PUT",data:t,tags:["appraisals","apprasial_details"]})}));return(0,u.jsx)(d,{delegations:{onSubmit:Q,hookForm:N,resultRef:k,unitValueLandRef:c,tableStResPrcRef:z,areasAndAddElmsRef:j,tableHomologationPRef:x,landAndConstructionsRef:R,isLoading:C}})}),{select_fields:["physical_approach","page_four.surface.superficie_total_land","page_four.surface.superficie_total_land_subject"]})}}]);
//# sourceMappingURL=7718.1b78105f.chunk.js.map