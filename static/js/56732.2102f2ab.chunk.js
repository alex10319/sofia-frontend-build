"use strict";(self.webpackChunksofia_frontend=self.webpackChunksofia_frontend||[]).push([[56732],{56732:(e,o,r)=>{r.r(o),r.d(o,{default:()=>J});var l=r(72791),t=r(60364),s=r(61134),a=r(67571),i=r(79684),n=r(29124),d=r(82709),u=r(91356),p=r(36279),c=r(60095),m=r(57910),v=r(57747),h=r(90018),g=r(3556),y=r(12383),b=r(80184);const f=e=>{let{delegations:{hookForm:o,inptsRules:r,placesOptions:l}}=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h1",{className:"title",children:"Vivienda"}),(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)(g.Z,{name:"housing.street_name",register:o.register,errors:o.formState.errors,label:"Calle",placeholder:"Av. de las Americas",options:r,style:{textTransform:"uppercase"}}),(0,b.jsxs)("div",{className:"inpts-pairs",children:[(0,b.jsx)(g.Z,{name:"housing.official_number",register:o.register,errors:o.formState.errors,label:"No. Oficial",placeholder:"123",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.street_between_1_name",register:o.register,errors:o.formState.errors,label:"Entre calle 1",placeholder:"Juan de la Cruz",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.street_between_2_name",register:o.register,errors:o.formState.errors,label:"Entre calle 2",placeholder:"Juarez",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.colony",register:o.register,errors:o.formState.errors,label:"Colonia",placeholder:"Rincon de los Reyes",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{maxLength:"5",name:"housing.zip_code",register:o.register,errors:o.formState.errors,label:"C.P.",placeholder:"45987",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.municipality",register:o.register,errors:o.formState.errors,label:"Delegaci\xf3n o Municipio",placeholder:"Zapopan",style:{textTransform:"uppercase"},options:r}),(0,b.jsx)(y.Z,{name:"housing.id_place",label:"Entidad Federativa",placeholder:"Selecciona una Entidad Federativa",options:l,hookForm:o,rules:r}),(0,b.jsx)(g.Z,{name:"housing.sub_section",label:"Manzana",placeholder:"Manzana",register:o.register,errors:o.formState.errors,options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.lot",label:"Lote",placeholder:"Lote",register:o.register,errors:o.formState.errors,options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.section",label:"Super Manzana",placeholder:"Super Manzana",register:o.register,errors:o.formState.errors,options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.lat",label:"Latitud",placeholder:"192.52",register:o.register,errors:o.formState.errors,options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.lng",label:"Longitud",placeholder:"432.52",register:o.register,errors:o.formState.errors,options:r,style:{textTransform:"uppercase"}})]})]})]})},x=e=>{let{hookForm:o,inptsRules:r,placesOptions:t}=e;const s=o.watch("housing.zip_code");return(0,l.useEffect)((()=>{if(5!==(null===s||void 0===s?void 0:s.length))return;if(!h[s])return v.Z.zipCode.warning(s),o.setValue("housing.id_place",""),void o.setValue("housing.municipality","");(()=>{const{d_estado:e,d_ciudad:r}=h[s],l=t.find((o=>o.label===e));o.setValue("housing.id_place",l),o.setValue("housing.municipality",r),o.clearErrors("housing.id_place"),o.clearErrors("housing.municipality")})()}),[s]),(0,b.jsx)(f,{delegations:{hookForm:o,inptsRules:r,placesOptions:t}})};var _=r(21720);const j=[{label:"Vivienda Nueva",value:0},{label:"Vivienda Usada",value:1}],S=(0,t.$j)((e=>{var o,r;let{_authSlice:l}=e;return{type_shf:null!==(o=null===l||void 0===l||null===(r=l.user)||void 0===r?void 0:r.type_shf)&&void 0!==o?o:""}}))((e=>{let{type_shf:o,delegations:{hookForm:r,placesOptions:l,showHousingType:t}}=e;return(0,b.jsxs)("div",{className:"header-inpts",children:[(0,b.jsx)(_.Z,{size:"sm",module:"users",name:"id_valuer",placeholder:"Valuador",query:{typeShf:"valuer"},isDisabled:"valuer"===o,hookForm:r}),(0,b.jsx)(_.Z,{size:"sm",module:"users",name:"id_controller",query:{typeShf:"controller"},isDisabled:"controller"===o,placeholder:"Controlador",hookForm:r}),t&&(0,b.jsx)(y.Z,{size:"sm",name:"housing_type",placeholder:"Tipo de vivienda",options:j,hookForm:r}),(0,b.jsx)(y.Z,{size:"sm",name:"id_place",placeholder:"Entidad Federativa",options:l,hookForm:r})]})})),w=(0,t.$j)((e=>{var o,r,l,t,s,a;let{_authSlice:i}=e;return{_id:null!==(o=null===i||void 0===i||null===(r=i.user)||void 0===r?void 0:r._id)&&void 0!==o?o:"",name:null!==(l=null===i||void 0===i||null===(t=i.user)||void 0===t?void 0:t.name)&&void 0!==l?l:"",type_shf:null!==(s=null===i||void 0===i||null===(a=i.user)||void 0===a?void 0:a.type_shf)&&void 0!==s?s:""}}))((e=>{let{_id:o,name:r,type_shf:t,hookForm:s,isEditing:a,isLine3Form:i}=e;const d=!i,u=(0,n.iL)("places");return(0,l.useEffect)((()=>{t&&s.setValue("valuer"===t?"id_valuer":"id_controller",{value:o,label:r})}),[t]),(0,b.jsx)(S,{delegations:{hookForm:s,isEditing:a,placesOptions:u,showHousingType:d}})}));var T=r(61619),k=r(47446),Z=r(68219);const F=e=>{let{delegations:{hookForm:o,zipCodeKey:r,inptsRules:l,inptsValues:t,settlementTypeKey:s,settlementOptions:a}}=e;return(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("h5",{className:"sub-title",children:"Direcci\xf3n"}),(0,b.jsx)("div",{className:"inpts-pairs",children:(0,i.qt)(t)&&t.map((e=>{let{name:t,label:i,placeholder:n=""}=e;return s!==t?(0,b.jsx)(g.Z,{maxLength:t===r?5:void 0,name:t,register:o.register,errors:o.formState.errors,placeholder:n,label:i,options:l,style:{textTransform:"uppercase"}},t):(0,b.jsx)(Z.Z,{name:t,placeholder:n,label:i,options:a,hookForm:o,errors:o.formState.errors,menuPortalTarget:document.body,rules:l},t)}))})]})},z=e=>{let{hookForm:o,inptsRules:r,zipCodeKey:t,inptsValues:s,municipalityKey:a,settlementTypeKey:i}=e;const[n,d]=(0,l.useState)([]),u=o.watch(t);return(0,l.useEffect)((()=>{if(5!==(null===u||void 0===u?void 0:u.length))return;if(!h[u])return v.Z.zipCode.warning(u),d([]),o.setValue(i,""),void o.setValue(a,"");(()=>{const{d_ciudad:e,...r}=h[u];delete r.d_estado,delete r.c_estado,delete r.c_mnpio;const l=Object.entries(r).map((e=>{let[o,r]=e;return{label:o,value:r.id_asenta_cpcons,...r}}));d(l),o.setValue(a,e),o.clearErrors(a)})()}),[u]),(0,b.jsx)(F,{delegations:{hookForm:o,zipCodeKey:t,inptsRules:r,inptsValues:s,settlementTypeKey:i,settlementOptions:n}})},E=[{name:"owner.address.street",label:"Calle",placeholder:"Av. de las Americas"},{name:"owner.address.outer_number",label:"No. Ext",placeholder:"123"},{name:"owner.address.inner_number",label:"No. Interior (Opcional)",placeholder:"123"},{name:"owner.address.zip_code",label:"C.P.",placeholder:"12345"},{name:"owner.address.colony",label:"Colonia",placeholder:"Selecciona una colonia"},{name:"owner.address.municipality",label:"Delegaci\xf3n o Municipio",placeholder:"Delegaci\xf3n o Municipio"}],N=e=>{let{hookForm:o,inptsRules:r,isLine3Form:l}=e;return(0,b.jsxs)("div",{className:"w-100",children:[(0,b.jsx)("h1",{className:"title",children:"Propetario"}),(0,b.jsx)(k.BK,{name:"owner.name",label:l?"Nombre / Raz\xf3n Social":"Nombre(s)",register:o.register,errors:o.formState.errors,placeholder:l?"Nombre / Raz\xf3n Social":"Ismael",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(k.BK,{name:"owner.rfc",register:o.register,errors:o.formState.errors,label:"RFC",placeholder:"ROVI123456123",style:{textTransform:"uppercase"},options:{...r,pattern:{value:/^[A-Z]{4}[0-9]{6}[A-Z0-9]{3}$/i,message:"RFC inv\xe1lido"}}}),(0,b.jsx)(k.BK,{name:"owner.curp",register:o.register,errors:o.formState.errors,label:"CURP",style:{textTransform:"uppercase"},placeholder:"ROVI490617HSPDSS05",options:{...r,pattern:{value:/^[A-Z]{4}[0-9]{6}[H|M]{1}[A-Z]{5}[0-9]{2}$/i,message:"CURP inv\xe1lido"}}}),l&&(0,b.jsx)(k.BK,{name:"owner.legal_agent",register:o.register,errors:o.formState.errors,label:"Representante Legal",placeholder:"Representante Legal",style:{textTransform:"uppercase"},options:r}),(0,b.jsx)(z,{zipCodeKey:"owner.address.zip_code",municipalityKey:"owner.address.municipality",settlementTypeKey:"owner.address.colony",hookForm:o,inptsRules:r,inptsValues:E}),(0,b.jsx)(k.BK,{name:"owner.email",icon:(0,b.jsx)(T.Z,{size:12}),register:o.register,errors:o.formState.errors,label:"Correo Electr\xf3nico",placeholder:"email@email.com",options:{...r,pattern:{value:/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,message:"Correo electr\xf3nico inv\xe1lido"}}})]})},V=e=>{let{hookForm:o,inptsRules:r}=e;return(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsx)("h5",{className:"sub-title",children:"Datos de Escritura"}),(0,b.jsx)(g.Z,{type:"number",name:"housing.notary_number",register:o.register,errors:o.formState.errors,label:"N\xfamero de Notario",placeholder:"123456",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.notary_name",register:o.register,errors:o.formState.errors,placeholder:"Pedro Gonz\xe1lez Ortega",label:"Nombre del Notario",options:r,style:{textTransform:"uppercase"}}),(0,b.jsxs)("div",{className:"inpts-pairs",children:[(0,b.jsx)(g.Z,{name:"housing.place",register:o.register,errors:o.formState.errors,label:"Plaza",placeholder:"Plaza",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{type:"number",name:"housing.deed_number",register:o.register,errors:o.formState.errors,label:"No. de Escritura",placeholder:"No. de Escritura",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.book",register:o.register,errors:o.formState.errors,label:"Libro",placeholder:"Libro",style:{textTransform:"uppercase"},options:r}),(0,b.jsx)(g.Z,{name:"housing.volume_book",register:o.register,errors:o.formState.errors,label:"Volumen",placeholder:"Volumen",options:r,style:{textTransform:"uppercase"}})]})]})},O=[{name:"applicant.address.street",label:"Calle",placeholder:"Av. de las Americas"},{name:"applicant.address.outer_number",label:"No. Ext",placeholder:"123"},{name:"applicant.address.inner_number",label:"No. Interior (Opcional)",placeholder:"Apto. 123"},{name:"applicant.address.zip_code",label:"C.P.",placeholder:"12345"},{name:"applicant.address.colony",label:"Colonia",placeholder:"Selecciona una colonia"},{name:"applicant.address.municipality",label:"Delegaci\xf3n o Municipio",placeholder:"Centro"}],R=e=>{let{hookForm:o,inptsRules:r}=e;const[t,s]=(0,l.useState)(!1),{watch:a}=o,i=a(O[0].name),n=a(O[1].name),d=a(O[2].name),u=a(O[3].name),p=a(O[4].name),c=a(O[5].name);return(0,l.useEffect)((()=>{t&&O.forEach((e=>{const r=e.name.split(".")[2],l=o.getValues(e.name);o.setValue("owner.address.".concat(r),l)}))}),[i,n,d,u,p,c]),(0,b.jsxs)("div",{className:"w-100",children:[(0,b.jsx)("h1",{className:"title",children:"Solicitante"}),(0,b.jsx)(g.Z,{name:"applicant.paternal_surname",register:o.register,errors:o.formState.errors,label:"Apellido Paterno",placeholder:"Rodr\xedguez",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"applicant.maternal_surname",register:o.register,errors:o.formState.errors,label:"Apellido Materno",placeholder:"V\xe1squez",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"applicant.name",register:o.register,errors:o.formState.errors,label:"Nombre(s)",placeholder:"Ismael",options:r,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"applicant.rfc",register:o.register,errors:o.formState.errors,label:"RFC",placeholder:"ROVI123456123",style:{textTransform:"uppercase"},options:{...r,pattern:{value:/^[A-Z]{4}[0-9]{6}[A-Z0-9]{3}$/i,message:"RFC inv\xe1lido"}}}),(0,b.jsx)(g.Z,{name:"applicant.nss",register:o.register,errors:o.formState.errors,label:"NSS",placeholder:"12345678910",style:{textTransform:"uppercase"},options:{...r,pattern:{value:/^[0-9]{11}$/,message:"NSS inv\xe1lido, debe contener exactamente 11 d\xedgitos num\xe9ricos"}}}),(0,b.jsx)(g.Z,{name:"applicant.curp",register:o.register,errors:o.formState.errors,label:"CURP",placeholder:"ROVI490617HSPDSS05",style:{textTransform:"uppercase"},options:{...r,pattern:{value:/^[A-Z]{4}[0-9]{6}[H|M]{1}[A-Z]{5}[0-9]{2}$/i,message:"CURP inv\xe1lido"}}}),(0,b.jsx)(z,{zipCodeKey:"applicant.address.zip_code",municipalityKey:"applicant.address.municipality",settlementTypeKey:"applicant.address.colony",hookForm:o,inptsRules:r,inptsValues:O}),(0,b.jsxs)("div",{className:"d-flex mb-2 gap-1 cursor-pointer pointer",onClick:()=>{return s(e=!t),void(e&&O.forEach((e=>{const r=e.name.split(".")[2],l=o.getValues(e.name);o.setValue("owner.address.".concat(r),l)})));var e},children:[(0,b.jsx)("input",{type:"checkbox",className:"cursor-pointer",checked:t}),(0,b.jsx)("p",{style:{userSelect:"none"},children:"La direcci\xf3n del Propietario es la misma que la del Solicitante."})]})]})};var P=r(52007),C=r.n(P);function L(){return L=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},L.apply(this,arguments)}function A(e,o){if(null==e)return{};var r,l,t=function(e,o){if(null==e)return{};var r,l,t={},s=Object.keys(e);for(l=0;l<s.length;l++)r=s[l],o.indexOf(r)>=0||(t[r]=e[r]);return t}(e,o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)r=s[l],o.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var q=(0,l.forwardRef)((function(e,o){var r=e.color,t=void 0===r?"currentColor":r,s=e.size,a=void 0===s?24:s,i=A(e,["color","size"]);return l.createElement("svg",L({ref:o,xmlns:"http://www.w3.org/2000/svg",width:a,height:a,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},i),l.createElement("line",{x1:"12",y1:"1",x2:"12",y2:"23"}),l.createElement("path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6"}))}));q.propTypes={color:C().string,size:C().oneOfType([C().string,C().number])},q.displayName="DollarSign";const M=q,B=e=>{let{delegations:{type:o,hookForm:r,inptsRules:l,placesOptions:t,settlementOptions:s}}=e;const a=[{name:"housing.street_type",label:"Tipo de Vialidad",placeholder:"Selecciona el tipo",options:d.xd},{name:"housing.zone_type",label:"Tipo de Zona",placeholder:"Selecciona el tipo",options:d.af},{name:"housing.section",label:"Super Manzana",placeholder:"Super Manzana"},{name:"housing.sub_section",label:"Manzana",placeholder:"Manzana"},{name:"housing.lot",label:"Lote (m\xe1x. 5 car\xe1cteres)",placeholder:"Lote",maxLength:5},{name:"housing.outer_number",label:"No. Exterior",placeholder:"123"},{name:"housing.inner_number",label:"No. Interiror (Opcional)",placeholder:"123"},{name:"housing.house_type",label:"Tipo de vivienda",options:d.L$,placeholder:"Selecciona el tipo"}];return(0,b.jsxs)("div",{className:"mt-1",children:[(0,b.jsxs)("h1",{className:"title",children:["Domicilio Geogr\xe1fico del Inmueble (Vivienda ",o,")"]}),(0,b.jsx)(g.Z,{name:"housing.zip_code",register:r.register,errors:r.formState.errors,label:"C\xf3digo Postal",placeholder:"45678",maxLength:"5",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(y.Z,{name:"housing.id_place",placeholder:"Selecciona la Entidad Federativa",label:"Entidad Federativa",options:t||[],hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.municipality",register:r.register,errors:r.formState.errors,label:"Delegaci\xf3n o Municipio",placeholder:"Zapopan",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(Z.Z,{name:"housing.town",placeholder:"Localidad",label:"Localidad",options:s,register:r.register,errors:r.formState.errors,menuPortalTarget:document.body,rules:l}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-lg-6 col-sm-12 col-md-12",children:(0,b.jsx)(Z.Z,{name:"housing.settlement",isDisabled:!(0,i.qt)(s),label:"Nombre del Asentamiento",placeholder:"Selecciona un Asentamiento",options:s,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l})}),(0,b.jsx)("div",{className:"col-lg-6 col-sm-12 col-md-12",children:(0,b.jsx)(y.Z,{name:"housing.settlement_type",placeholder:"Selecciona un Tipo de Asentamiento",label:"Tipo de Asentamiento",options:d.p9,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l})})]}),(0,b.jsx)("hr",{}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)("div",{className:"col-lg-6 col-sm-12 col-md-12",children:(0,b.jsx)(g.Z,{name:"housing.street_name",register:r.register,errors:r.formState.errors,label:"Nombre Vialidad / Calle",placeholder:"Ju\xe1rez",style:{textTransform:"uppercase"},options:l})}),a.map(((e,o)=>{const t="housing.street_type"===e.name;return(0,b.jsx)("div",{className:t?"col-lg-6 col-sm-12 col-md-12":"",children:null!==e&&void 0!==e&&e.options?(0,b.jsx)(y.Z,{name:e.name,placeholder:e.placeholder,label:e.label,options:e.options,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l},e.name):(0,b.jsx)(g.Z,{name:e.name,type:null!==e&&void 0!==e&&e.type?e.type:"text",maxLength:null===e||void 0===e?void 0:e.maxLength,register:r.register,errors:r.formState.errors,label:null===e||void 0===e?void 0:e.label,placeholder:null===e||void 0===e?void 0:e.placeholder,options:l,style:{textTransform:"uppercase"}},e.name)},o)}))]}),(0,b.jsx)("hr",{}),(0,b.jsx)("h5",{className:"sub-title",children:"Vialidad"}),(0,b.jsxs)("div",{className:"row",children:[(0,b.jsx)(g.Z,{name:"housing.street_between_1_name",register:r.register,errors:r.formState.errors,label:"Primera Entrevialidad",placeholder:"Ju\xe1rez",options:l,className:"col-md-6",style:{textTransform:"uppercase"}}),(0,b.jsx)(y.Z,{name:"housing.street_between_1_type",placeholder:"Selecciona un Tipo de Vialidad",label:"Tipo de Vialidad",options:d.xd,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l,className:"col-md-6"}),(0,b.jsx)(g.Z,{name:"housing.street_between_2_name",register:r.register,errors:r.formState.errors,label:"Segunda Entrevialidad",placeholder:"Gonz\xe1lez Ortega",options:l,className:"col-md-6",style:{textTransform:"uppercase"}}),(0,b.jsx)(y.Z,{name:"housing.street_between_2_type",placeholder:"Selecciona un Tipo de Vialidad",label:"Tipo de Vialidad",options:d.xd,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l,className:"col-md-6"}),(0,b.jsx)(g.Z,{name:"housing.street_back_name",register:r.register,errors:r.formState.errors,placeholder:"Privada de las Flores",label:"Vialidad Posterior",options:l,className:"col-md-6",style:{textTransform:"uppercase"}}),(0,b.jsx)(y.Z,{name:"housing.street_back_type",placeholder:"Selecciona un Tipo de Vialidad",label:"Tipo de Vialidad",options:d.xd,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l,className:"col-md-6"})]}),(0,b.jsx)(g.Z,{name:"housing.reference",type:"textarea",register:r.register,errors:r.formState.errors,label:"Referencia",placeholder:"Escriba aqu\xed la referencia del domicilio",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.lat",register:r.register,errors:r.formState.errors,label:"Latitud",placeholder:"456.234",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.lng",register:r.register,errors:r.formState.errors,label:"Longitud",placeholder:"456.234",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(y.Z,{name:"housing.typology",placeholder:"Selecciona una opci\xf3n",label:"Tipologia",options:d.Py,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l}),(0,b.jsx)(y.Z,{name:"housing.level",placeholder:"Selecciona una opci\xf3n",label:"Nivel",options:d.mH,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l}),(0,b.jsx)(g.Z,{name:"housing.construction_area",register:r.register,errors:r.formState.errors,label:"Area de Construcci\xf3n",placeholder:"Area de Construcci\xf3n",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(g.Z,{name:"housing.land_area",register:r.register,errors:r.formState.errors,label:"Area de Terreno",placeholder:"Area de Terreno",options:l,style:{textTransform:"uppercase"}}),(0,b.jsx)(y.Z,{name:"housing.number_rooms",placeholder:"Selecciona una opci\xf3n",label:"No. de Rec\xe1maras",options:d.zY,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l}),(0,b.jsx)(y.Z,{name:"housing.number_bathrooms",placeholder:"Selecciona una opci\xf3n",label:"No. de Ba\xf1os",options:d.zY,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l}),(0,b.jsx)(y.Z,{name:"housing.parking_lot",placeholder:"Selecciona una opci\xf3n",label:"No. de Estacionamientos",options:d.zY,hookForm:r,errors:r.formState.errors,menuPortalTarget:document.body,rules:l}),(0,b.jsx)(g.Z,{type:"number",name:"housing.approximate_value",icon:(0,b.jsx)(M,{size:15}),register:r.register,errors:r.formState.errors,label:"Monto de la Acci\xf3n",placeholder:"00.00",options:l,style:{textTransform:"uppercase"}})]})},K=e=>{let{type:o,hookForm:r,inptsRules:t}=e;const[s,a]=(0,l.useState)([]),i=(0,n.iL)("places"),u=r.watch("housing.settlement"),p=r.watch("housing.zip_code");return(0,l.useEffect)((()=>{u&&(()=>{var e;const{d_asenta:o,d_tipo_asenta:l}=r.getValues("housing.settlement");if(!o&&!l)return;const t=l.toUpperCase(),s=d.p9.filter((e=>e.label===t));r.setValue("housing.settlement_type",null!==(e=null===s||void 0===s?void 0:s[0])&&void 0!==e?e:void 0),r.clearErrors("housing.settlement_type")})()}),[u]),(0,l.useEffect)((()=>{if(5!==(null===p||void 0===p?void 0:p.length))return;if(!h[p])return v.Z.zipCode.warning(p),r.setValue("housing.id_place",""),r.setValue("housing.municipality",""),r.setValue("housing.settlement",""),r.setValue("housing.town",""),r.setValue("housing.settlement_type",""),void a([]);(()=>{var e;const{d_estado:o,d_ciudad:l,...t}=h[p];delete t.d_estado,delete t.c_estado,delete t.c_mnpio;const s=Object.entries(t).map((e=>{let[o,r]=e;return{label:o,value:r.id_asenta_cpcons,...r}}));a(s);const n=i.find((e=>e.label===o));r.setValue("housing.id_place",n),r.setValue("housing.municipality",l),r.clearErrors("housing.id_place"),r.clearErrors("housing.municipality"),console.log(null===(e=r.getValues("housing.settlement"))||void 0===e?void 0:e.label),-1===s.findIndex((e=>{var o;return e.label===(null===(o=r.getValues("housing.settlement"))||void 0===o?void 0:o.label)}))&&(r.setValue("housing.settlement",""),r.setValue("housing.settlement_type",""))})()}),[p]),(0,b.jsx)(B,{delegations:{type:o,hookForm:r,inptsRules:t,placesOptions:i,settlementOptions:s}})},D=e=>{let{delegations:{hookForm:o,inptsRules:r,isEditing:l,isLine3Form:t,placesOptions:s,watcherHousingType:a}}=e;return(0,b.jsxs)("div",{id:"CreateRequestForm",children:[(0,b.jsx)(w,{hookForm:o,isEditing:l,isLine3Form:t}),(0,b.jsx)("hr",{}),(0,b.jsx)(R,{hookForm:o,inptsRules:r}),(0,b.jsx)(N,{hookForm:o,inptsRules:r,isLine3Form:t}),(0,b.jsx)("hr",{}),t?(0,b.jsx)(x,{hookForm:o,inptsRules:r,placesOptions:s}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(K,{hookForm:o,inptsRules:r,type:(null===a||void 0===a?void 0:a.value)>0?"Usada":"Nueva"}),(null===a||void 0===a?void 0:a.value)>0&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("hr",{}),(0,b.jsx)(V,{hookForm:o,inptsRules:r})]})]})]})},I=e=>{let{hookForm:o,...r}=e;const l=(0,n.aM)(),t=(0,n.iL)("places"),s=o.watch("housing_type");return(0,b.jsx)(D,{delegations:{query:l,hookForm:o,placesOptions:t,watcherHousingType:s,...r}})};var H=r(84744),$=r(71651);const U={width:"100%"},Y=e=>{var o,r,l,t,s,a,i,n;let{delegations:{filesState:d,hookForm:u,onSubmit:p,isLoading:v,isEditing:h,inptsRules:g,isLine3Form:y,handleSelectChange:f,handleTertaryBtnClick:x,isFetchingRequestToEdit:_}}=e;return(0,b.jsx)("form",{onSubmit:p,id:"RequestCreatePage",children:(0,b.jsxs)("div",{className:"wrapper",children:[(0,b.jsx)(I,{hookForm:u,isEditing:h,inptsRules:g,isLine3Form:y}),(0,b.jsxs)("div",{className:"rigth-column",children:[(0,b.jsx)(c.Z,{loading:v||_,primaryBtnLabel:"Guardar",primaryBtnIcon:(0,b.jsx)(H.Z,{size:16}),handlePrimaryBtn:p,showSecundaryBtn:!1,tertiaryBtnLabel:"Cancelar",tertiaryBtnIcon:(0,b.jsx)($.Z,{size:16}),handletertiaryBtn:x}),(0,b.jsxs)("div",{children:[(0,b.jsx)(m.Z,{label:"Escritura",customStylesText:"dropezone-text",defaultFile:null===d||void 0===d?void 0:d.deed,errors:null===(o=u.formState.errors)||void 0===o||null===(r=o.files)||void 0===r?void 0:r.deed,setValue:f("deed"),...U}),(0,b.jsx)(m.Z,{label:"Plano",customStylesText:"dropezone-text",defaultFile:null===d||void 0===d?void 0:d.plane,errors:null===(l=u.formState.errors)||void 0===l||null===(t=l.files)||void 0===t?void 0:t.plane,setValue:f("plane"),...U}),(0,b.jsx)(m.Z,{label:"Boleta Predial",customStylesText:"dropezone-text",defaultFile:null===d||void 0===d?void 0:d.property_tax_bill,errors:null===(s=u.formState.errors)||void 0===s||null===(a=s.files)||void 0===a?void 0:a.property_tax_bill,setValue:f("property_tax_bill"),...U}),(0,b.jsx)(m.Z,{label:"Boleta de Agua",customStylesText:"dropezone-text",defaultFile:null===d||void 0===d?void 0:d.water_bill,errors:null===(i=u.formState.errors)||void 0===i||null===(n=i.files)||void 0===n?void 0:n.water_bill,setValue:f("water_bill"),...U}),(0,b.jsx)(m.Z,{maxFiles:5,className:"mb-4",customStylesText:"dropezone-text",defaultFile:null===d||void 0===d?void 0:d.other_files,label:"Otros Archivos (M\xe1ximo 5 archivos)",acceptFiles:{image:!0,xlsx:!0,docs:!0,pdf:!0},setValue:f("other_files"),...U})]})]})]})})},G=(0,i.Ev)({RequestSliceActions:u.RequestSlice.actions}),J=(0,t.$j)((e=>{var o;let{_requestSlice:r}=e;return{formErros:null!==(o=null===r||void 0===r?void 0:r.formErros)&&void 0!==o?o:null}}),G)((e=>{let{formErros:o,requestSliceActions:r}=e;const t=(0,n.aM)(),{id:u}=(0,a.UO)(),c=(0,a.k6)(),m=!("id"===u),v=t.get("type")>0,[h,g]=(0,l.useState)({}),[y,f]=(0,l.useState)(!1),[x,_]=(0,l.useState)({required:{value:!1,message:"Este campo no puede estar vac\xedo."}}),j=(0,l.useRef)(null),S=(0,l.useRef)({deed:!1,plane:!1,property_tax_bill:!1,water_bill:!1}),[w]=p.b.useLazyGetDataQuery(),[T,{isFetching:k}]=p.b.useLazyGetDataQuery(),[Z,{isLoading:F,isSuccess:z}]=(0,n.u7)({toastName:"requestCRUD",options:{succesParam:m}}),[E,N]=(0,n.$9)({module:"petition",tags:["petitions","petition_details"]}),{reset:V,handleSubmit:O,...R}=(0,s.cI)({shouldUnregister:!0}),P=function(e){let o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Este campo no puede estar vac\xedo.";null!==h&&void 0!==h&&h[e]||R.setError("files.".concat(e),{type:"manual",message:o})},C=e=>e?{label:null===e||void 0===e?void 0:e.name,value:null===e||void 0===e?void 0:e._id}:void 0,L=async()=>{o&&Object.keys(o).forEach((e=>{R.setError(e,{type:"custom",message:"Este campo no puede estar vac\xedo."})}))};return(0,l.useEffect)((()=>{z&&!y&&c.replace("/app/request")}),[z,y]),(0,l.useEffect)((()=>((async()=>{var e,o,r,l,t,s,a,n,p,c,h,y,b,f,x,w,k,Z,F,z,E,N,O,R,P,A,q,M,B,K,D,I,H,$,U,Y,G,J;if(!m)return;const{data:Q}=await T({module:"petitions/".concat(u),tags:[]}).unwrap();j.current={...Q.place};const W=Q.status>0;S.current={deed:W,plane:W,property_tax_bill:W,water_bill:v&&W};const X={required:{value:W,message:"Este campo no puede estar vac\xedo."}},ee={...Q||{},id_controller:C(null===Q||void 0===Q?void 0:Q.controller),id_valuer:C(null===Q||void 0===Q?void 0:Q.valuer),id_place:C(null===Q||void 0===Q?void 0:Q.place),owner:{...null===Q||void 0===Q?void 0:Q.owner,address:{...null===Q||void 0===Q||null===(e=Q.owner)||void 0===e?void 0:e.address,colony:null!==Q&&void 0!==Q&&null!==(o=Q.owner)&&void 0!==o&&null!==(r=o.address)&&void 0!==r&&r.colony?{label:null===Q||void 0===Q||null===(l=Q.owner)||void 0===l||null===(t=l.address)||void 0===t?void 0:t.colony}:void 0}},applicant:{...null===Q||void 0===Q?void 0:Q.applicant,address:{...null===Q||void 0===Q||null===(s=Q.applicant)||void 0===s?void 0:s.address,colony:null!==Q&&void 0!==Q&&null!==(a=Q.applicant)&&void 0!==a&&null!==(n=a.address)&&void 0!==n&&n.colony?{label:null===Q||void 0===Q||null===(p=Q.applicant)||void 0===p||null===(c=p.address)||void 0===c?void 0:c.colony}:void 0}},...v?{}:{housing_type:"number"===typeof(null===Q||void 0===Q?void 0:Q.housing_type)?{label:Q.housing_type<1?"Vivienda Nueva":"Vivienda Usada",value:Q.housing_type}:void 0},housing:{...null===Q||void 0===Q?void 0:Q.housing,settlement:null!==Q&&void 0!==Q&&null!==(h=Q.housing)&&void 0!==h&&h.settlement?{label:null===Q||void 0===Q||null===(y=Q.housing)||void 0===y?void 0:y.settlement}:void 0,house_type:(null===d.L$||void 0===d.L$?void 0:d.L$[null===Q||void 0===Q||null===(b=Q.housing)||void 0===b?void 0:b.house_type])||void 0,id_place:null!==Q&&void 0!==Q&&null!==(f=Q.housing)&&void 0!==f&&null!==(x=f.id_place)&&void 0!==x&&x.value?null===Q||void 0===Q||null===(w=Q.housing)||void 0===w?void 0:w.id_place:void 0,settlement_type:null!==(k=null===d.p9||void 0===d.p9?void 0:d.p9[null===(Z=Q.housing)||void 0===Z?void 0:Z.settlement_type])&&void 0!==k?k:void 0,street_type:null!==(F=null===d.xd||void 0===d.xd?void 0:d.xd[null===(z=Q.housing)||void 0===z?void 0:z.street_type])&&void 0!==F?F:void 0,zone_type:null!==(E=null===d.af||void 0===d.af?void 0:d.af[null===(N=Q.housing)||void 0===N?void 0:N.zone_type])&&void 0!==E?E:void 0,street_between_1_type:null!==(O=null===d.xd||void 0===d.xd?void 0:d.xd[null===(R=Q.housing)||void 0===R?void 0:R.street_between_1_type])&&void 0!==O?O:void 0,street_between_2_type:null!==(P=null===d.xd||void 0===d.xd?void 0:d.xd[null===(A=Q.housing)||void 0===A?void 0:A.street_between_2_type])&&void 0!==P?P:void 0,street_back_type:null!==(q=null===d.xd||void 0===d.xd?void 0:d.xd[null===(M=Q.housing)||void 0===M?void 0:M.street_back_type])&&void 0!==q?q:void 0,number_rooms:null!==(B=null===d.zY||void 0===d.zY?void 0:d.zY[null===(K=Q.housing)||void 0===K?void 0:K.number_rooms])&&void 0!==B?B:void 0,number_bathrooms:null!==(D=null===d.zY||void 0===d.zY?void 0:d.zY[null===(I=Q.housing)||void 0===I?void 0:I.number_bathrooms])&&void 0!==D?D:void 0,parking_lot:null!==(H=null===d.zY||void 0===d.zY?void 0:d.zY[null===($=Q.housing)||void 0===$?void 0:$.parking_lot])&&void 0!==H?H:void 0,typology:null!==(U=null===d.Py||void 0===d.Py?void 0:d.Py[null===(Y=Q.housing)||void 0===Y?void 0:Y.typology])&&void 0!==U?U:void 0,level:null!==(G=null===d.mH||void 0===d.mH?void 0:d.mH[null===(J=Q.housing)||void 0===J?void 0:J.level])&&void 0!==G?G:void 0}};g((0,i.qt)(null===Q||void 0===Q?void 0:Q.files)?null===Q||void 0===Q?void 0:Q.files.reduce(((e,o)=>({...e,[o.description]:"other_files"===o.description?[...(0,i.qt)(e[o.description])?e[o.description]:[],{...o,path:o.name}]:{...o,path:o.name}})),{}):{}),null===ee||void 0===ee||delete ee.controller,null===ee||void 0===ee||delete ee.valuer,null===ee||void 0===ee||delete ee.place,V(ee),L(),_(X)})(),()=>r.clearFormErrors())),[m]),(0,l.useEffect)((()=>{let e;return o&&(e=R.watch(((e,o)=>{let{name:r,type:l}=o;"change"===l&&R.trigger(r)}))),()=>{e&&"function"===typeof e.unsubscribe&&e.unsubscribe()}}),[R.watch]),(0,b.jsx)(Y,{delegations:{hookForm:R,onSubmit:function(){(()=>{for(const[e,o]of Object.entries(S.current))o&&P(e)})(),O((async e=>{var o,r,l,s,a,i,n,d,p,c,v,g,y,b,x,_,S,T,k,F,z,V,O,P,C,L,A,q,M,B,K,D,I,H,$,U,Y,G,J,Q,W,X,ee,oe,re,le,te,se,ae;let ie;if(m){const{id_place:o}=e;ie=j.current._id===o.value?R.getValues("key"):await w({module:"petitions/key",params:{code:e.id_place.alias},tags:[]}).unwrap()}else ie=await w({module:"petitions/key",params:{code:e.id_place.alias},tags:[]}).unwrap();const ne={...e},de=m?R.getValues("petition_type"):null!==(o=Number(t.get("type")))&&void 0!==o?o:0,ue={...ne.housing,settlement:null!==(r=null===(l=ne.housing.settlement)||void 0===l?void 0:l.label)&&void 0!==r?r:void 0,id_place:null!==(s=null===(a=ne.housing)||void 0===a||null===(i=a.id_place)||void 0===i?void 0:i.value)&&void 0!==s?s:void 0,house_type:null!==(n=null===(d=ne.housing)||void 0===d||null===(p=d.house_type)||void 0===p?void 0:p.value)&&void 0!==n?n:void 0,settlement_type:null!==(c=null===(v=ne.housing)||void 0===v||null===(g=v.settlement_type)||void 0===g?void 0:g.value)&&void 0!==c?c:void 0,street_type:null!==(y=null===(b=ne.housing)||void 0===b||null===(x=b.street_type)||void 0===x?void 0:x.value)&&void 0!==y?y:void 0,zone_type:null!==(_=null===(S=ne.housing)||void 0===S||null===(T=S.zone_type)||void 0===T?void 0:T.value)&&void 0!==_?_:void 0,street_between_1_type:null!==(k=null===(F=ne.housing)||void 0===F||null===(z=F.street_between_1_type)||void 0===z?void 0:z.value)&&void 0!==k?k:void 0,street_between_2_type:null!==(V=null===(O=ne.housing)||void 0===O||null===(P=O.street_between_2_type)||void 0===P?void 0:P.value)&&void 0!==V?V:void 0,street_back_type:null!==(C=null===(L=ne.housing)||void 0===L||null===(A=L.street_back_type)||void 0===A?void 0:A.value)&&void 0!==C?C:void 0,number_rooms:null!==(q=null===(M=ne.housing)||void 0===M||null===(B=M.number_rooms)||void 0===B?void 0:B.value)&&void 0!==q?q:void 0,number_bathrooms:null!==(K=null===(D=ne.housing)||void 0===D||null===(I=D.number_bathrooms)||void 0===I?void 0:I.value)&&void 0!==K?K:void 0,parking_lot:null!==(H=null===($=ne.housing)||void 0===$||null===(U=$.parking_lot)||void 0===U?void 0:U.value)&&void 0!==H?H:void 0,typology:null!==(Y=null===(G=ne.housing)||void 0===G||null===(J=G.typology)||void 0===J?void 0:J.value)&&void 0!==Y?Y:void 0,level:null!==(Q=null===(W=ne.housing)||void 0===W||null===(X=W.level)||void 0===X?void 0:X.value)&&void 0!==Q?Q:void 0},pe={key:null!==(ee=null===(oe=ie)||void 0===oe?void 0:oe.data)&&void 0!==ee?ee:ie,petition_type:de,...ne,id_valuer:ne.id_valuer.value,id_controller:ne.id_controller.value,id_place:ne.id_place.value,housing_type:null===(re=ne.housing_type)||void 0===re?void 0:re.value,applicant:{...ne.applicant,address:{...ne.applicant.address,colony:null!==(le=null===(te=ne.applicant.address.colony)||void 0===te?void 0:te.label)&&void 0!==le?le:void 0}},owner:{...ne.owner,address:{...ne.owner.address,colony:null!==(se=null===(ae=ne.owner.address.colony)||void 0===ae?void 0:ae.label)&&void 0!==se?se:void 0}},housing:ue},ce=m?"PUT":"POST",me=m?"petitions/".concat(u):"petitions",{data:ve}=await Z({module:me,method:ce,data:pe,tags:["petitions","petition_details"]}).unwrap();null!==ve&&void 0!==ve&&ve._id&&(f(!0),m&&N(),await E(h,ve._id)),f(!1)}))(...arguments)},filesState:h,isEditing:m,inptsRules:x,isLine3Form:v,handleSelectChange:e=>o=>{g({...h,[e]:o}),R.clearErrors("files.".concat(e))},handleTertaryBtnClick:()=>c.replace("/app/request"),isFetchingRequestToEdit:k,isLoading:F||y}})}))},71651:(e,o,r)=>{r.d(o,{Z:()=>d});var l=r(72791),t=r(52007),s=r.n(t);function a(){return a=Object.assign||function(e){for(var o=1;o<arguments.length;o++){var r=arguments[o];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(e[l]=r[l])}return e},a.apply(this,arguments)}function i(e,o){if(null==e)return{};var r,l,t=function(e,o){if(null==e)return{};var r,l,t={},s=Object.keys(e);for(l=0;l<s.length;l++)r=s[l],o.indexOf(r)>=0||(t[r]=e[r]);return t}(e,o);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(l=0;l<s.length;l++)r=s[l],o.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(t[r]=e[r])}return t}var n=(0,l.forwardRef)((function(e,o){var r=e.color,t=void 0===r?"currentColor":r,s=e.size,n=void 0===s?24:s,d=i(e,["color","size"]);return l.createElement("svg",a({ref:o,xmlns:"http://www.w3.org/2000/svg",width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:t,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},d),l.createElement("path",{d:"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"}),l.createElement("polyline",{points:"14 2 14 8 20 8"}),l.createElement("line",{x1:"9",y1:"15",x2:"15",y2:"15"}))}));n.propTypes={color:s().string,size:s().oneOfType([s().string,s().number])},n.displayName="FileMinus";const d=n}}]);
//# sourceMappingURL=56732.2102f2ab.chunk.js.map