{"version":3,"file":"static/js/83868.1c592317.chunk.js","mappings":"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","sources":["Pages/app/Appraisal/AppraisalDoc/AppraisalDoc.jsx","Pages/app/Appraisal/AppraisalDoc/AppraisalDocContainer.jsx"],"sourcesContent":["import { HeaderPage, Tabs, DocumentationForm } from \"Components/Appraisal\";\r\n\r\nconst tabs = [\r\n\t{\r\n\t\ttitle : \"DocumentaciÃ³n\",\r\n\t\tTab   : DocumentationForm,\r\n\t},\r\n];\r\n\r\nconst AppraisalDoc = ({\r\n\tdelegations : {\r\n\t\tonSubmit,\r\n\t\thookForm,\r\n\t\tisLoading,\r\n\t},\r\n}) => {\r\n\r\n\tconst { formState : { isDirty } } = hookForm;\r\n\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<HeaderPage\r\n\t\t\t\tcurrentIndex={0}\r\n\t\t\t\tsection=\"header\"\r\n\t\t\t\tisDirty={isDirty}\r\n\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\tisSubmitingData={isLoading}\r\n\t\t\t/>\r\n\t\t\t<Tabs\r\n\t\t\t\ttabs={tabs}\r\n\t\t\t\tonSubmit={onSubmit}\r\n\t\t\t\thookForm={hookForm}\r\n\t\t\t\tisSubmitingData={isLoading}\r\n\t\t\t/>\r\n\t\t</>\r\n\t);\r\n};\r\n\r\nexport default AppraisalDoc;\r\n","import { useEffect, useState }   from \"react\";\r\nimport { useForm, useFormState } from \"react-hook-form\";\r\nimport { useDispatch }           from \"react-redux\";\r\nimport { useParams }             from \"react-router-dom\";\r\n\r\nimport { getTime }                                 from \"Helpers\";\r\nimport { useHandlerMutation, useSendFileWithDesc } from \"Helpers/Hooks\";\r\nimport { FilesSlice }                              from \"Store/Slices\";\r\nimport { AppraisalHOCPageFetcher }                 from \"Components/Appraisal\";\r\nimport AppraisalDoc                                from \"./AppraisalDoc\";\r\nimport { DEFAULT_FETCH_DATA, PARAMS }              from \"./AppraisalDocContants\";\r\n\r\n\r\nconst AppraisalDocContainer = ({ appraise = DEFAULT_FETCH_DATA }) => {\r\n\r\n\tconst { id : appraiseId } = useParams();\r\n\r\n\tconst [loadingFiles, setLoadingFiles] = useState(false);\r\n\r\n\t// ------------> redux <---------------\r\n\tconst distpach = useDispatch();\r\n\r\n\t// ------------> RTK-Q <---------------\r\n\tconst [ editApprasial, { isLoading  : isLoadingMutation } ] = useHandlerMutation({ toastName : \"apprasialCRUD\" });\r\n\r\n\tconst { documentation } = appraise;\r\n\r\n\tconst {\r\n\t\tdeed,\r\n\t\tplane,\r\n\t\tproperty_tax_bill,\r\n\t\twater_bill,\r\n\t\tother_files,\r\n\t} = documentation;\r\n\r\n\t// ------------> useHookForm <---------------\r\n\tconst getFile = (fileInfo) => {\r\n\t\tif (!fileInfo?.location) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\tconst file = { ...fileInfo };\r\n\t\tdelete file?.description;\r\n\r\n\t\treturn file;\r\n\t};\r\n\r\n\tconst defaultValues  = {\r\n\t\tvisit_date : getTime(documentation?.visit_date),\r\n\t\tdeed       : {\r\n\t\t\tfile        : getFile(deed),\r\n\t\t\tdescription : deed?.description ?? \"\",\r\n\t\t},\r\n\r\n\t\tplane : {\r\n\t\t\tfile        : getFile(plane),\r\n\t\t\tdescription : plane?.description ?? \"\",\r\n\t\t},\r\n\r\n\t\tproperty_tax_bill : {\r\n\t\t\tfile        : getFile(property_tax_bill),\r\n\t\t\tdescription : property_tax_bill?.description ?? \"\",\r\n\t\t},\r\n\r\n\t\twater_bill : {\r\n\t\t\tfile        : getFile(water_bill),\r\n\t\t\tdescription : water_bill?.description ?? \"\",\r\n\t\t},\r\n\r\n\t\tother_files : other_files,\r\n\t};\r\n\r\n\tconst hookForm = useForm({ defaultValues });\r\n\r\n\tconst { handleSubmit, control } = hookForm;\r\n\r\n\tconst { dirtyFields } = useFormState({ control });\r\n\r\n\t// ------------> submitData <---------------\r\n\tconst submitDataWithOutFiles = async (visit_date) => {\r\n\t\tif (!dirtyFields?.visit_date) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tawait editApprasial({\r\n\t\t\tmodule : `/appraisals/documentation/${appraiseId}`,\r\n\t\t\tmethod : \"PUT\",\r\n\t\t\tdata   : { visit_date : visit_date[0] },\r\n\t\t\ttags   : [\"appraisals\", \"apprasial_details\"],\r\n\t\t});\r\n\t};\r\n\r\n\tconst isDirtyFiles = () => {\r\n\t\tconst isDirtySomeFile = dirtyFields?.deed?.file\r\n\t\t|| dirtyFields?.other_files\r\n\t\t|| dirtyFields?.plane?.file\r\n\t\t|| dirtyFields?.property_tax_bill?.file\r\n\t\t|| dirtyFields?.water_bill?.file;\r\n\r\n\t\treturn isDirtySomeFile;\r\n\t};\r\n\r\n\tconst isDirtyDescFiles = () => {\r\n\t\tconst isDirtySomeDesc = dirtyFields?.deed?.description\r\n\t\t|| dirtyFields?.plane?.description\r\n\t\t|| dirtyFields?.property_tax_bill?.description\r\n\t\t|| dirtyFields?.water_bill?.description;\r\n\r\n\t\treturn isDirtySomeDesc;\r\n\t};\r\n\r\n\tconst [ handleSubmitFiles, handleRemoveFiles ] = useSendFileWithDesc({ dirtyFields, module : \"atachment-file\" });\r\n\r\n\tconst submitFiles = async (files) => {\r\n\t\tif (!isDirtyFiles() && !isDirtyDescFiles()) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tawait handleRemoveFiles();\r\n\r\n\t\tawait handleSubmitFiles(files);\r\n\t};\r\n\r\n\tconst onSubmit = handleSubmit(async (data) => {\r\n\t\tconst { visit_date, ...filesFormData } = data;\r\n\r\n\t\tsetLoadingFiles(true);\r\n\r\n\t\tawait submitDataWithOutFiles(visit_date);\r\n\r\n\t\tawait submitFiles(filesFormData);\r\n\r\n\t\tsetLoadingFiles(false);\r\n\t});\r\n\r\n\tuseEffect(() => {\r\n\t\treturn () => {\r\n\t\t\tdistpach(FilesSlice.actions.clearFiles());\r\n\t\t};\r\n\t}, []);\r\n\r\n\treturn (\r\n\t\t<AppraisalDoc\r\n\t\t\tdelegations={{\r\n\t\t\t\tonSubmit,\r\n\t\t\t\thookForm,\r\n\t\t\t\tisLoading : isLoadingMutation || loadingFiles,\r\n\t\t\t}}\r\n\t\t/>\r\n\t);\r\n};\r\n\r\nexport default AppraisalHOCPageFetcher(AppraisalDocContainer, PARAMS);\r\n"],"names":["tabs","title","Tab","DocumentationForm","delegations","onSubmit","hookForm","isLoading","formState","isDirty","currentIndex","section","isSubmitingData","AppraisalHOCPageFetcher","appraise","DEFAULT_FETCH_DATA","id","appraiseId","useParams","loadingFiles","setLoadingFiles","useState","distpach","useDispatch","editApprasial","isLoadingMutation","useHandlerMutation","toastName","documentation","deed","plane","property_tax_bill","water_bill","other_files","getFile","fileInfo","location","file","description","defaultValues","visit_date","getTime","useForm","handleSubmit","control","dirtyFields","useFormState","handleSubmitFiles","handleRemoveFiles","useSendFileWithDesc","module","submitFiles","async","isDirtyFiles","isDirtyDescFiles","files","filesFormData","data","method","tags","submitDataWithOutFiles","useEffect","FilesSlice","actions","clearFiles","PARAMS"],"sourceRoot":""}